{% extends "base.html" %}

{% block title %}
  <title>Task manager - Positions</title>
{% endblock %}

{% block content %}
  <h1>
    Positions
    {% if user.is_staff %}
      <a href="{% url 'task_manager:position-create' %}?next={% url 'task_manager:position-list' %}" class="btn btn-outline-primary">+</a>
    {% endif %}
  </h1>

  {% if position_list %}
    <table class="table">
      <tr>
        <th>â„–</th>
        <th>Position</th>
        <th>Number of workers</th>
        <th>Change position</th>
        <th>Delete position</th>
      </tr>
    {% for position in position_list %}
      <tr>
        <td>{{ position.id }}</td>
        <td>{{ position.name }}</td>
        <td>{{ position.num_workers }}</td>
        <td><a href="{% url 'task_manager:position-update' pk=position.id %}?next={% url 'task_manager:position-list' %}" class="btn btn-success">Change</a></td>
        <td>
          {% if position.num_workers %}
            <div class="btn btn-secondary">Delete</div>
          {% else %}
            <a href="{% url 'task_manager:position-delete' pk=position.id %}?next={% url 'task_manager:position-list' %}" class="btn btn-danger">Delete</a>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  {% endif %}

{% endblock %}
