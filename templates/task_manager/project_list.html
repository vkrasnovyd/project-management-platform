{% extends "base.html" %}

{% block title %}
  <title>Task manager - My Projects</title>
{% endblock %}

{% block content %}
  <h1>
    My projects
    <a href="{% url 'task_manager:project-create' %}?next={% url 'task_manager:project-list' %}" class="btn btn-outline-primary">+</a>
  </h1>
  
  <form action="" method="get">
    {{ filterset.form.as_p }}
    <input type="submit">
  </form>

  {% for project in project_list %}
    <a href="{% url 'task_manager:project-detail' pk=project.id %}">{{ project }}</a>
    {% if project.is_active %}
      <div class="badge badge-pill badge-success">Active</div>
    {% else %}
      <div class="badge badge-pill badge-secondary">Archived</div>
    {% endif %}
    <p>{{ project.num_completed_tasks }} of {{ project.num_tasks }} completed tasks</p>
    <progress id="project_progress" max="100" value="{{ project.progress }}"></progress>
    <hr>
  {% endfor %}

{% endblock %}
